---
import readingTime from 'reading-time';
import { formatDistance } from 'date-fns';

import Button from '../../ui/Button.astro';

// console.log(Astro.props);
const { post } = Astro.props;
console.log(post);
const { data } = post;

const { title, created_at, summary } = data;

const link = `${post.collection}/${post.slug}`;

const readingTimeMinutes = Math.ceil(readingTime(post.body).minutes);
const relativeDateTime = formatDistance(created_at, new Date(), {
  addSuffix: true,
});
---

<article class='flex flex-col rounded-md shadow overflow-hidden p-8'>
  <header>
    <div class='flex justify-between'>
      <h2 class='text-3xl capitalize'>{title}</h2>
      <span>{readingTimeMinutes} mins</span>
    </div>
    <div class='text-sm py-2 capitalize ps-1'>{relativeDateTime}</div>
  </header>
  <div class='pt-8'>
    <p>{summary}</p>
  </div>

  <div class='flex justify-end mt-8'>
    <Button href={link}>Read More</Button>
  </div>
</article>
